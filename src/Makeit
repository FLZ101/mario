.PHONY: all

all: boot/boot.bin kernel/kernel.exe

include $(DEPS)

%.bin: %.asm
	@$(NASM) -f bin -l $*.lst -o $@ $<
	@echo $@

kernel/kernel.exe: $(OBJS)
	$(LD) $(LDFLAGS) -o $@ $^

%.o: %.S
	@$(CC) $(CFLAGS) -D__ASSEMBLY__ -o $@ $<
	@echo $@

%.o: %.c
	@$(CC) $(CFLAGS) -o $@ $<
	@echo $@
